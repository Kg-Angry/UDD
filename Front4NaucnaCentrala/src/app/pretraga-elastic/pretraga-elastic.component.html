<div class="s007">
  <form (submit)="PretragaPoPoljima($event)">
    <div class="inner-form">
      <div class="basic-search">
        <div class="input-field">
          <div class="icon-wrap">
            <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="20" height="20" viewBox="0 0 20 20">
              <path d="M18.869 19.162l-5.943-6.484c1.339-1.401 2.075-3.233 2.075-5.178 0-2.003-0.78-3.887-2.197-5.303s-3.3-2.197-5.303-2.197-3.887 0.78-5.303 2.197-2.197 3.3-2.197 5.303 0.78 3.887 2.197 5.303 3.3 2.197 5.303 2.197c1.726 0 3.362-0.579 4.688-1.645l5.943 6.483c0.099 0.108 0.233 0.162 0.369 0.162 0.121 0 0.242-0.043 0.338-0.131 0.204-0.187 0.217-0.503 0.031-0.706zM1 7.5c0-3.584 2.916-6.5 6.5-6.5s6.5 2.916 6.5 6.5-2.916 6.5-6.5 6.5-6.5-2.916-6.5-6.5z"></path>
            </svg>
          </div>
            <input id="search" name="term" type="text" placeholder="Search..." />
          </div>
      <div class="advance-search">
        <mat-form-field>
          <mat-label>Kriterijum pretrage: </mat-label>
          <mat-select [(ngModel)]="kriterijumPretrage" [ngModelOptions]="{standalone: true}">
            <mat-option value="nazivCasopisa">NAZIV CASOPISA</mat-option>
            <mat-option value="naslovRada">NASLOV RADA</mat-option>
            <mat-option value="autor">IME I PREZIME AUTORA</mat-option>
            <mat-option value="kljucniPojmovi">KLJUCNI POJMOVI</mat-option>
            <mat-option value="sadrzaj">SADRZAJ</mat-option>
            <mat-option value="nazivNaucneOblasti">NAZIV NAUCNE OBLASTI</mat-option>
          </mat-select>
        </mat-form-field>
        <br/>
          <mat-checkbox class="example-margin" [(ngModel)]="MoreLike" [ngModelOptions]="{standalone: true}">MoreLikeThis</mat-checkbox>
        <div class="input-field">
        <input type="submit" value="Pretraga" class="btn-search">
        </div>
        <br/>
        <span class="dest" data-toggle="collapse" href="#collapseExample" role="button" aria-expanded="false" aria-controls="collapseExample">
          Napredna pretraga
        </span>
        <div class="collapse" id="collapseExample">
          <br/>
          <form (submit)="Proba($event)">
            <div class="row">
              <div>
                <mat-form-field class="example-full-width">
                  <input matInput placeholder="Uneti sadrzaj rada" name="sadrzaj">
                </mat-form-field>
              </div>
              <div>
                <mat-form-field class="example-full-width">
                  <input matInput placeholder="Uneti naslov rada" name="naslovRada">
                </mat-form-field>
              </div>
              <div>
                <mat-form-field class="example-full-width">
                  <input matInput placeholder="Uneti kljucne pojmove" name="kljucniPojmovi">
                </mat-form-field>
              </div>
            </div>
            <div class="row second">
              <div>
                <mat-form-field class="example-full-width">
                  <input matInput placeholder="Uneti naziv casopisa" name="nazivCasopisa">
                </mat-form-field>
              </div>
              <div>
                <mat-form-field class="example-full-width">
                  <input matInput placeholder="Uneti naziv naucne oblasti:" name="naucnaOblast">
                </mat-form-field>
              </div>
              <div>
                <mat-form-field class="example-full-width">
                  <input matInput placeholder="Uneti podatke o autoru:" name="autor">
                </mat-form-field>
              </div>
              <mat-form-field>
                <mat-label>Operacija: </mat-label>
                <mat-select [(ngModel)]="AndOr" [ngModelOptions]="{standalone: true}">
                  <mat-option value="AND">AND</mat-option>
                  <mat-option value="OR">OR</mat-option>
                </mat-select>
              </mat-form-field>
              </div>
            <div class="row third">
              <div class="input-field">
                <input type="submit" class="btn-search" value="Napredna pretraga">
              </div>
            </div>
          </form>
      </div>
      <br/>
      </div>
      </div>
    </div>
  </form>
</div>
<div *ngIf="rezultat !== null" >
  <h5>Rezultati pretrage: </h5>
<h6 *ngIf="rezultat.length === 0" >Nema rezultata pretrage!</h6>
<table class="table table-striped table-bordered" *ngIf="rezultat.length !== 0 ">
  <thead style="background-color:#57b846">
    <tr style="text-align: center;">
      <th scope="col" style="text-align: center;">#</th>
      <th scope="col" style="text-align: center;">Naslov</th>
      <th scope="col" style="text-align: center;">Autor</th>
      <th scope="col" style="text-align: center;">Kljucni pojmovi</th>
      <th scope="col" style="text-align: center;">Naucna oblast</th>
      <th scope="col" style="text-align: center;">Casopis</th>
      <th scope="col" style="text-align: center;">Sadrzaj</th>
      <th scope="col"></th>
      <th scope="col"></th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let r of rezultat" >
    <th scope="row" [innerHTML]="r.highlight | safe: 'html'"></th>
      <td style="text-align: center;">{{r.naslovRada}}</td>
      <td style="text-align: center;">{{r.autor}}</td>
      <td style="text-align: center;">{{r.kljucniPojmovi}}</td>
      <td style="text-align: center;">{{r.nazivnaucneOblasti}}</td>
      <td style="text-align: center;">{{r.nazivCasopisa}}</td>
      <td><textarea rows="10" cols="75">{{r.sadrzaj}}</textarea></td>
      <td>
          <div *ngFor="let c of casopisi" >
            <button *ngIf="r.nazivCasopisa === c.naziv && c.tipCasopisa === 'OPEN_ACCESS'"  class="btn btn-green" (click)="Preuzmi(r.naslovRada)">Preuzmi</button>
            <button *ngIf="r.nazivCasopisa === c.naziv && c.tipCasopisa === 'SA_PRETPLATOM'"  class="btn btn-green" (click)="Kupi(r.naslovRada)">Kupi</button>
          </div>
      </td>
      <td>
        <button class="btn btn-green" (click)="GeoProstornaPretraga(r.autor)">GeoProstorna pretraga</button>
      </td>

    </tr>
  </tbody>
</table>
</div>

<script src="js/extention/choices.js"></script>
<script>
  const customSelects = document.querySelectorAll("select");
  const deleteBtn = document.getElementById('delete')
  const choices = new Choices('select',
  {
    searchEnabled: false,
    removeItemButton: true,
    itemSelectText: '',
  });
  for (let i = 0; i < customSelects.length; i++)
  {
    customSelects[i].addEventListener('addItem', function(event)
    {
      if (event.detail.value)
      {
        let parent = this.parentNode.parentNode
        parent.classList.add('valid')
        parent.classList.remove('invalid')
      }
      else
      {
        let parent = this.parentNode.parentNode
        parent.classList.add('invalid')
        parent.classList.remove('valid')
      }
    }, false);
  }
  deleteBtn.addEventListener("click", function(e)
  {
    e.preventDefault()
    const deleteAll = document.querySelectorAll('.choices__button')
    for (let i = 0; i < deleteAll.length; i++)
    {
      deleteAll[i].click();
    }
  });

</script>
